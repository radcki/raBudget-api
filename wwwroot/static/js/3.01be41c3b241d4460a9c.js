(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{yCJy:function(e,t,n){"use strict";n.r(t);var i=n("4d7F"),o=n.n(i),a=n("uiqh"),r={data:function(){return{budget:{currency:"PLN"},dateMenu:!1,requiredRule:[function(e){return!!e}],categories:{incomes:[],spendings:[],savings:[]},dialog:!1,valid:!0,resolve:null,reject:null,allocationType:null,allocationId:null,editor:{category:null,date:null,description:null,enteredAmount:null,modifyAmount:0}}},computed:{amount:function(){return 1*this.editor.modifyAmount+1*this.editor.enteredAmount}},mounted:function(){var e=this;this.requiredRule=[function(t){return!!t||e.$t("forms.requiredField")}]},methods:{open:function(e){var t=this;return this.allocationId=e,this.editor.modifyAmount=0,a.a.getAllocation(e).then(function(e){e.ok&&(t.dialog=!0,e.json().then(function(e){t.editor.category=e.destinationCategory.categoryId,t.allocationType="spendings",t.categories={spendings:e.budget.spendingCategories,savings:e.budget.savingCategories,incomes:e.budget.incomeCategories},t.editor.date=t.$moment(e.date).format("YYYY-MM-DD"),t.editor.description=e.description,t.editor.enteredAmount=e.amount,t.budget=e.budget}))}),new o.a(function(e,n){t.resolve=e,t.reject=n})},save:function(){var e=this;if(this.$refs.editorForm.validate()){var t={allocationId:this.allocationId,category:this.editor.category,date:this.editor.date,description:this.editor.description,amount:this.amount};a.a.updateAllocation(t).then(function(t){e.resolve(t)}),this.dialog=!1}},cancel:function(){this.resolve(!1),this.dialog=!1}}},l=n("KHd+"),s=Object(l.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.allocationId?n("v-dialog",{attrs:{fullscreen:!e.$vuetify.breakpoint.smAndUp,"max-width":800},on:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"esc",27,t.key,"Escape")?e.cancel(t):null}},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-toolbar",{attrs:{color:"primary",dark:"",dense:"",flat:""}},[e.$vuetify.breakpoint.smAndUp?e._e():n("v-btn",{attrs:{icon:"",dark:""},on:{click:e.cancel}},[n("v-icon",[e._v("close")])],1),e._v(" "),n("v-toolbar-title",{staticClass:"white--text"},[e._v(e._s(e.$t("allocations.editing")))]),e._v(" "),n("v-spacer"),e._v(" "),e.$vuetify.breakpoint.smAndUp?n("v-btn",{attrs:{flat:"",icon:""},on:{click:e.cancel}},[n("v-icon",{attrs:{light:""}},[e._v("close")])],1):e._e(),e._v(" "),e.$vuetify.breakpoint.smAndUp?e._e():n("v-btn",{attrs:{flat:"flat"},nativeOn:{click:function(t){return e.save(t)}}},[e._v(e._s(e.$t("general.save")))])],1),e._v(" "),n("v-card-text",[n("v-form",{ref:"editorForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs12:""}},[n("v-menu",{ref:"dateMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.editor.date,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(t){e.$set(e.editor,"date",t)}},model:{value:e.dateMenu,callback:function(t){e.dateMenu=t},expression:"dateMenu"}},[n("v-text-field",{attrs:{slot:"activator",label:e.$t("allocations.date"),rules:e.requiredRule,"prepend-icon":"event",readonly:""},slot:"activator",model:{value:e.editor.date,callback:function(t){e.$set(e.editor,"date",t)},expression:"editor.date"}}),e._v(" "),n("v-date-picker",{on:{input:function(t){e.$refs.dateMenu.save(e.editor.date)}},model:{value:e.editor.date,callback:function(t){e.$set(e.editor,"date",t)},expression:"editor.date"}})],1)],1),e._v(" "),n("v-flex",{attrs:{xs12:"",md5:""}},[n("v-select",{attrs:{items:e.categories[e.allocationType],"item-text":"name","item-value":"categoryId","single-line":"",rules:e.requiredRule,label:e.$t("general.category")},scopedSlots:e._u([{key:"selection",fn:function(t){return[n("v-list-tile-action",[n("v-icon",[e._v(e._s(t.item.icon))])],1),e._v(" "),n("span",[e._v(e._s(t.item.name))])]}},{key:"item",fn:function(t){return[t.item?n("v-list-tile-action",[n("v-icon",[e._v(e._s(t.item.icon))])],1):e._e(),e._v(" "),n("span",[e._v(e._s(t.item.name))])]}}]),model:{value:e.editor.category,callback:function(t){e.$set(e.editor,"category",t)},expression:"editor.category"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",md7:""}},[n("v-text-field",{attrs:{rules:e.requiredRule,label:e.$t("general.description")},model:{value:e.editor.description,callback:function(t){e.$set(e.editor,"description",t)},expression:"editor.description"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{type:"number",step:"0.01",label:e.$t("transactions.addOrDelete")},model:{value:e.editor.modifyAmount,callback:function(t){e.$set(e.editor,"modifyAmount",t)},expression:"editor.modifyAmount"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{type:"number",step:"0.01",label:e.$t("transactions.baseAmount")},model:{value:e.editor.enteredAmount,callback:function(t){e.$set(e.editor,"enteredAmount",t)},expression:"editor.enteredAmount"}})],1)],1)],1)],1),e._v(" "),n("span",{staticClass:"subheading"},[e._v("\n        "+e._s(e.$t("transactions.finalAmount"))+":\n      ")]),e._v(" "),n("span",{staticClass:"headline"},[e._v(" \n        "+e._s(e._f("currency")(e.amount,e.$currencies[e.budget.currency]))+"\n      ")])],1),e._v(" "),n("v-card-actions",{staticClass:"pt-0"},[n("v-spacer"),e._v(" "),e.$vuetify.breakpoint.smAndUp?n("v-btn",{attrs:{color:"red",flat:"flat"},nativeOn:{click:function(t){return e.cancel(t)}}},[e._v(e._s(e.$t("general.cancel")))]):e._e(),e._v(" "),e.$vuetify.breakpoint.smAndUp?n("v-btn",{attrs:{color:"primary darken-1",flat:"flat"},nativeOn:{click:function(t){return e.save(t)}}},[e._v(e._s(e.$t("general.save")))]):e._e()],1)],1)],1):e._e()},[],!1,null,null,null);s.options.__file="AllocationEditor.vue",t.default=s.exports}}]);
//# sourceMappingURL=3.01be41c3b241d4460a9c.js.map