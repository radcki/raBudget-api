{"version":3,"sources":["webpack:///./src/components/AllocationEditor.vue?2541","webpack:///./src/components/AllocationEditor.vue?0f32","webpack:///src/components/AllocationEditor.vue","webpack:///./src/components/AllocationEditor.vue"],"names":["i","n","o","a","components_AllocationEditorvue_type_script_lang_js_","data","budget","currency","dateMenu","requiredRule","v","categories","incomes","spendings","savings","dialog","valid","resolve","reject","allocationType","allocationId","editor","category","date","description","enteredAmount","modifyAmount","computed","amount","this","mounted","_this","$t","methods","open","_this2","allocations_service","getAllocation","then","response","ok","json","allocation","destinationCategory","categoryId","spendingCategories","savingCategories","incomeCategories","$moment","format","promise_default","save","_this3","$refs","editorForm","validate","updateAllocation","cancel","l","component","Object","componentNormalizer","_vm","_h","$createElement","_c","_self","attrs","fullscreen","$vuetify","breakpoint","smAndUp","max-width","on","keydown","$event","_k","keyCode","key","model","value","callback","$$v","expression","color","dark","dense","flat","_e","icon","click","_v","staticClass","_s","light","nativeOn","ref","lazy-validation","grid-list-md","row","wrap","align-center","justify-center","xs12","close-on-content-click","nudge-right","return-value","lazy","transition","offset-y","full-width","min-width","update:returnValue","$set","slot","label","rules","prepend-icon","readonly","input","md5","items","item-text","item-value","single-line","scopedSlots","_u","fn","item","name","md7","type","step","_f","$currencies","options","__file","__webpack_exports__","default"],"mappings":"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","file":"static/js/2.34f54a0e006d47eeb652.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.allocationId)?_c('v-dialog',{attrs:{\"fullscreen\":!_vm.$vuetify.breakpoint.smAndUp,\"max-width\":800},on:{\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"esc\",27,$event.key,\"Escape\")){ return null; }return _vm.cancel($event)}},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-toolbar',{attrs:{\"color\":\"primary\",\"dark\":\"\",\"dense\":\"\",\"flat\":\"\"}},[(!_vm.$vuetify.breakpoint.smAndUp)?_c('v-btn',{attrs:{\"icon\":\"\",\"dark\":\"\"},on:{\"click\":_vm.cancel}},[_c('v-icon',[_vm._v(\"close\")])],1):_vm._e(),_vm._v(\" \"),_c('v-toolbar-title',{staticClass:\"white--text\"},[_vm._v(_vm._s(_vm.$t(\"allocations.editing\")))]),_vm._v(\" \"),_c('v-spacer'),_vm._v(\" \"),(_vm.$vuetify.breakpoint.smAndUp)?_c('v-btn',{attrs:{\"flat\":\"\",\"icon\":\"\"},on:{\"click\":_vm.cancel}},[_c('v-icon',{attrs:{\"light\":\"\"}},[_vm._v(\"close\")])],1):_vm._e(),_vm._v(\" \"),(!_vm.$vuetify.breakpoint.smAndUp)?_c('v-btn',{attrs:{\"flat\":\"flat\"},nativeOn:{\"click\":function($event){return _vm.save($event)}}},[_vm._v(_vm._s(_vm.$t('general.save')))]):_vm._e()],1),_vm._v(\" \"),_c('v-card-text',[_c('v-form',{ref:\"editorForm\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-container',{attrs:{\"grid-list-md\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\",\"align-center\":\"\",\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-menu',{ref:\"dateMenu\",attrs:{\"close-on-content-click\":false,\"nudge-right\":40,\"return-value\":_vm.editor.date,\"lazy\":\"\",\"transition\":\"scale-transition\",\"offset-y\":\"\",\"full-width\":\"\",\"min-width\":\"290px\"},on:{\"update:returnValue\":function($event){_vm.$set(_vm.editor, \"date\", $event)}},model:{value:(_vm.dateMenu),callback:function ($$v) {_vm.dateMenu=$$v},expression:\"dateMenu\"}},[_c('v-text-field',{attrs:{\"slot\":\"activator\",\"label\":_vm.$t('allocations.date'),\"rules\":_vm.requiredRule,\"prepend-icon\":\"event\",\"readonly\":\"\"},slot:\"activator\",model:{value:(_vm.editor.date),callback:function ($$v) {_vm.$set(_vm.editor, \"date\", $$v)},expression:\"editor.date\"}}),_vm._v(\" \"),_c('v-date-picker',{on:{\"input\":function($event){_vm.$refs.dateMenu.save(_vm.editor.date)}},model:{value:(_vm.editor.date),callback:function ($$v) {_vm.$set(_vm.editor, \"date\", $$v)},expression:\"editor.date\"}})],1)],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\",\"md5\":\"\"}},[_c('v-select',{attrs:{\"items\":_vm.categories[_vm.allocationType],\"item-text\":\"name\",\"item-value\":\"categoryId\",\"single-line\":\"\",\"rules\":_vm.requiredRule,\"label\":_vm.$t('general.category')},scopedSlots:_vm._u([{key:\"selection\",fn:function(data){return [_c('v-list-tile-action',[_c('v-icon',[_vm._v(_vm._s(data.item.icon))])],1),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(data.item.name))])]}},{key:\"item\",fn:function(data){return [(data.item)?_c('v-list-tile-action',[_c('v-icon',[_vm._v(_vm._s(data.item.icon))])],1):_vm._e(),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(data.item.name))])]}}]),model:{value:(_vm.editor.category),callback:function ($$v) {_vm.$set(_vm.editor, \"category\", $$v)},expression:\"editor.category\"}})],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\",\"md7\":\"\"}},[_c('v-text-field',{attrs:{\"rules\":_vm.requiredRule,\"label\":_vm.$t('general.description')},model:{value:(_vm.editor.description),callback:function ($$v) {_vm.$set(_vm.editor, \"description\", $$v)},expression:\"editor.description\"}})],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-text-field',{attrs:{\"type\":\"number\",\"step\":\"0.01\",\"label\":_vm.$t('transactions.addOrDelete')},model:{value:(_vm.editor.modifyAmount),callback:function ($$v) {_vm.$set(_vm.editor, \"modifyAmount\", $$v)},expression:\"editor.modifyAmount\"}})],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-text-field',{attrs:{\"type\":\"number\",\"step\":\"0.01\",\"label\":_vm.$t('transactions.baseAmount')},model:{value:(_vm.editor.enteredAmount),callback:function ($$v) {_vm.$set(_vm.editor, \"enteredAmount\", $$v)},expression:\"editor.enteredAmount\"}})],1)],1)],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"subheading\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t(\"transactions.finalAmount\"))+\":\\n      \")]),_vm._v(\" \"),_c('span',{staticClass:\"headline\"},[_vm._v(\" \\n        \"+_vm._s(_vm._f(\"currency\")(_vm.amount,_vm.$currencies[_vm.budget.currency]))+\"\\n      \")])],1),_vm._v(\" \"),_c('v-card-actions',{staticClass:\"pt-0\"},[_c('v-spacer'),_vm._v(\" \"),(_vm.$vuetify.breakpoint.smAndUp)?_c('v-btn',{attrs:{\"color\":\"red\",\"flat\":\"flat\"},nativeOn:{\"click\":function($event){return _vm.cancel($event)}}},[_vm._v(_vm._s(_vm.$t('general.cancel')))]):_vm._e(),_vm._v(\" \"),(_vm.$vuetify.breakpoint.smAndUp)?_c('v-btn',{attrs:{\"color\":\"primary darken-1\",\"flat\":\"flat\"},nativeOn:{\"click\":function($event){return _vm.save($event)}}},[_vm._v(_vm._s(_vm.$t('general.save')))]):_vm._e()],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AllocationEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AllocationEditor.vue?vue&type=script&lang=js&\"","<template>\r\n  <v-dialog :fullscreen=\"!$vuetify.breakpoint.smAndUp\" v-model=\"dialog\" v-if=\"allocationId\" :max-width=\"800\" @keydown.esc=\"cancel\">\r\n    <v-card>\r\n      <v-toolbar color=\"primary\" dark dense flat>\r\n        <v-btn v-if=\"!$vuetify.breakpoint.smAndUp\" icon dark @click=\"cancel\">\r\n          <v-icon>close</v-icon>\r\n        </v-btn>\r\n        <v-toolbar-title class=\"white--text\">{{ $t(\"allocations.editing\") }}</v-toolbar-title>\r\n        <v-spacer></v-spacer>\r\n        <v-btn v-if=\"$vuetify.breakpoint.smAndUp\" flat icon @click=\"cancel\">\r\n          <v-icon light>close</v-icon>\r\n        </v-btn>\r\n        <v-btn  v-if=\"!$vuetify.breakpoint.smAndUp\" \r\n                flat=\"flat\" \r\n                @click.native=\"save\">{{ $t('general.save') }}</v-btn>\r\n      </v-toolbar>\r\n      <v-card-text>\r\n        <v-form ref=\"editorForm\" v-model=\"valid\" lazy-validation>          \r\n          <v-container  grid-list-md>     \r\n            <v-layout row wrap align-center justify-center>                \r\n              <v-flex xs12>\r\n                <v-menu\r\n                  ref=\"dateMenu\"\r\n                  :close-on-content-click=\"false\"\r\n                  v-model=\"dateMenu\"\r\n                  :nudge-right=\"40\"\r\n                  :return-value.sync=\"editor.date\"\r\n                  lazy\r\n                  transition=\"scale-transition\"\r\n                  offset-y\r\n                  full-width\r\n                  min-width=\"290px\"\r\n                >\r\n                  <v-text-field\r\n                    slot=\"activator\"\r\n                    v-model=\"editor.date\"\r\n                    :label=\"$t('allocations.date')\"\r\n                    :rules=\"requiredRule\"\r\n                    prepend-icon=\"event\"\r\n                    readonly\r\n                  ></v-text-field>\r\n                  <v-date-picker v-model=\"editor.date\" @input=\"$refs.dateMenu.save(editor.date)\"></v-date-picker>\r\n\r\n                </v-menu>\r\n              </v-flex>\r\n\r\n              <v-flex xs12 md5>\r\n                <v-select\r\n                  v-model=\"editor.category\"\r\n                  :items=\"categories[allocationType]\"\r\n                  item-text=\"name\"\r\n                  item-value=\"categoryId\"\r\n                  single-line\r\n                  :rules=\"requiredRule\"\r\n                  :label=\"$t('general.category')\">\r\n\r\n                  <template slot=\"selection\" slot-scope=\"data\">\r\n                    <v-list-tile-action>\r\n                      <v-icon>{{ data.item.icon }}</v-icon>\r\n                    </v-list-tile-action>                      \r\n                    <span>{{ data.item.name }}</span>\r\n                  </template>\r\n                  <template slot=\"item\" slot-scope=\"data\">\r\n                    <v-list-tile-action v-if=\"data.item\">\r\n                      <v-icon>{{ data.item.icon }}</v-icon>\r\n                    </v-list-tile-action>                      \r\n                    <span>{{ data.item.name }}</span>\r\n                  </template>\r\n\r\n                </v-select>\r\n              </v-flex>\r\n\r\n              <v-flex xs12 md7>\r\n                <v-text-field\r\n                  v-model=\"editor.description\"\r\n                  :rules=\"requiredRule\"\r\n                  :label=\"$t('general.description')\"></v-text-field>\r\n              </v-flex>\r\n\r\n              <v-flex xs12>\r\n                <v-text-field v-model=\"editor.modifyAmount\" type=\"number\" step=\"0.01\" :label=\"$t('transactions.addOrDelete')\"></v-text-field>\r\n              </v-flex>\r\n\r\n              <v-flex xs12>\r\n                <v-text-field v-model=\"editor.enteredAmount\" type=\"number\" step=\"0.01\" :label=\"$t('transactions.baseAmount')\"></v-text-field>\r\n              </v-flex>\r\n            </v-layout>\r\n          </v-container>\r\n        </v-form>\r\n        <span class=\"subheading\">\r\n          {{ $t(\"transactions.finalAmount\") }}:\r\n        </span>\r\n        <span class=\"headline\"> \r\n          {{amount | currency($currencies[budget.currency])}}\r\n        </span>\r\n      </v-card-text>\r\n      <v-card-actions class=\"pt-0\">\r\n        <v-spacer></v-spacer>\r\n        \r\n        <v-btn v-if=\"$vuetify.breakpoint.smAndUp\" color=\"red\" flat=\"flat\" @click.native=\"cancel\">{{ $t('general.cancel') }}</v-btn>\r\n        <v-btn v-if=\"$vuetify.breakpoint.smAndUp\" color=\"primary darken-1\" flat=\"flat\" @click.native=\"save\">{{ $t('general.save') }}</v-btn>\r\n      </v-card-actions>\r\n    </v-card>\r\n  </v-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { allocationsService } from \"../_services/allocations.service.js\";\r\nexport default {\r\n  data: () => ({\r\n    budget: { currency: \"PLN\" },\r\n    dateMenu: false,\r\n    requiredRule: [v => !!v],\r\n    categories: {\r\n      incomes: [],\r\n      spendings: [],\r\n      savings: []\r\n    },\r\n    dialog: false,\r\n    valid: true,\r\n    resolve: null,\r\n    reject: null,\r\n    allocationType: null,\r\n    allocationId: null,\r\n    editor: {\r\n      category: null,\r\n      date: null,\r\n      description: null,\r\n      enteredAmount: null,\r\n      modifyAmount: 0.0\r\n    }\r\n  }),\r\n  computed: {\r\n    amount: function() {\r\n      return 1 * this.editor.modifyAmount + 1 * this.editor.enteredAmount;\r\n    }\r\n  },\r\n  mounted: function() {\r\n    this.requiredRule = [v => !!v || this.$t(\"forms.requiredField\")];\r\n  },\r\n  methods: {\r\n    open(allocationId) {\r\n      this.allocationId = allocationId;\r\n      this.editor.modifyAmount = 0.0;\r\n      allocationsService.getAllocation(allocationId).then(response => {\r\n        if (response.ok) {\r\n          this.dialog = true;\r\n          response.json().then(allocation => {\r\n            this.editor.category = allocation.destinationCategory.categoryId;\r\n            this.allocationType = \"spendings\";\r\n            this.categories = {\r\n              spendings: allocation.budget.spendingCategories,\r\n              savings: allocation.budget.savingCategories,\r\n              incomes: allocation.budget.incomeCategories\r\n            };\r\n            this.editor.date = this.$moment(allocation.date).format(\r\n              \"YYYY-MM-DD\"\r\n            );\r\n            this.editor.description = allocation.description;\r\n            this.editor.enteredAmount = allocation.amount;\r\n            this.budget = allocation.budget;\r\n          });\r\n        }\r\n      });\r\n      return new Promise((resolve, reject) => {\r\n        this.resolve = resolve;\r\n        this.reject = reject;\r\n      });\r\n    },\r\n    save() {\r\n      if (this.$refs.editorForm.validate()) {\r\n        var allocation = {\r\n          allocationId: this.allocationId,\r\n          category: this.editor.category,\r\n          date: this.editor.date,\r\n          description: this.editor.description,\r\n          amount: this.amount\r\n        };\r\n        allocationsService.updateAllocation(allocation).then(response => {\r\n          this.resolve(response);\r\n        });\r\n        this.dialog = false;\r\n      }\r\n    },\r\n    cancel() {\r\n      this.resolve(false);\r\n      this.dialog = false;\r\n    }\r\n  }\r\n};\r\n</script>","import { render, staticRenderFns } from \"./AllocationEditor.vue?vue&type=template&id=40592834&\"\nimport script from \"./AllocationEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./AllocationEditor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"AllocationEditor.vue\"\nexport default component.exports"],"sourceRoot":""}