(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/ibL":function(t,e,n){"use strict";n.r(e);var i=n("4d7F"),a=n.n(i),o=n("EVsC"),r={data:function(){return{budget:{currency:"PLN"},dateMenu:!1,requiredRule:[function(t){return!!t}],categories:{incomes:[],spendings:[],savings:[]},dialog:!1,valid:!0,resolve:null,reject:null,transactionType:null,transactionId:null,editor:{category:null,date:null,description:null,enteredAmount:null,modifyAmount:0}}},computed:{amount:function(){return 1*this.editor.modifyAmount+1*this.editor.enteredAmount}},mounted:function(){var t=this;this.requiredRule=[function(e){return!!e||t.$t("forms.requiredField")}]},methods:{open:function(t){var e=this;return this.transactionId=t,this.editor.modifyAmount=0,o.a.getTransaction(t).then(function(t){t.ok&&(e.dialog=!0,t.json().then(function(t){e.editor.category=t.category.categoryId,e.transactionType=0==t.category.type?"spendings":1==t.category.type?"incomes":"savings",e.categories={spendings:t.budget.spendingCategories,savings:t.budget.savingCategories,incomes:t.budget.incomeCategories},e.editor.date=e.$moment(t.date).format("YYYY-MM-DD"),e.editor.description=t.description,e.editor.enteredAmount=t.amount,e.budget=t.budget}))}),new a.a(function(t,n){e.resolve=t,e.reject=n})},save:function(){var t=this;if(this.$refs.editorForm.validate()){var e={transactionId:this.transactionId,category:this.editor.category,date:this.editor.date,description:this.editor.description,amount:this.amount};o.a.updateTransaction(e).then(function(e){t.resolve(e)}),this.dialog=!1}},cancel:function(){this.resolve(!1),this.dialog=!1}}},s=n("KHd+"),l=Object(s.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.transactionId?n("v-dialog",{attrs:{fullscreen:!t.$vuetify.breakpoint.smAndUp,"max-width":800},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"esc",27,e.key,"Escape")?t.cancel(e):null}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-toolbar",{attrs:{color:"primary",dark:"",dense:"",flat:""}},[t.$vuetify.breakpoint.smAndUp?t._e():n("v-btn",{attrs:{icon:"",dark:""},on:{click:t.cancel}},[n("v-icon",[t._v("close")])],1),t._v(" "),n("v-toolbar-title",{staticClass:"white--text"},[t._v(t._s(t.$t("transactions.editing")))]),t._v(" "),n("v-spacer"),t._v(" "),t.$vuetify.breakpoint.smAndUp?n("v-btn",{attrs:{flat:"",icon:""},on:{click:t.cancel}},[n("v-icon",{attrs:{light:""}},[t._v("close")])],1):t._e(),t._v(" "),t.$vuetify.breakpoint.smAndUp?t._e():n("v-btn",{attrs:{flat:"flat"},nativeOn:{click:function(e){return t.save(e)}}},[t._v(t._s(t.$t("general.save")))])],1),t._v(" "),n("v-card-text",[n("v-form",{ref:"editorForm",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs12:""}},[n("v-menu",{ref:"dateMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.editor.date,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){t.$set(t.editor,"date",e)}},model:{value:t.dateMenu,callback:function(e){t.dateMenu=e},expression:"dateMenu"}},[n("v-text-field",{attrs:{slot:"activator",label:t.$t("transactions.date"),rules:t.requiredRule,"prepend-icon":"event",readonly:""},slot:"activator",model:{value:t.editor.date,callback:function(e){t.$set(t.editor,"date",e)},expression:"editor.date"}}),t._v(" "),n("v-date-picker",{on:{input:function(e){t.$refs.dateMenu.save(t.editor.date)}},model:{value:t.editor.date,callback:function(e){t.$set(t.editor,"date",e)},expression:"editor.date"}})],1)],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md5:""}},[n("v-select",{attrs:{items:t.categories[t.transactionType],"item-text":"name","item-value":"categoryId","single-line":"",rules:t.requiredRule,label:t.$t("general.category")},scopedSlots:t._u([{key:"selection",fn:function(e){return[n("v-list-tile-action",[n("v-icon",[t._v(t._s(e.item.icon))])],1),t._v(" "),n("span",[t._v(t._s(e.item.name))])]}},{key:"item",fn:function(e){return[e.item?n("v-list-tile-action",[n("v-icon",[t._v(t._s(e.item.icon))])],1):t._e(),t._v(" "),n("span",[t._v(t._s(e.item.name))])]}}]),model:{value:t.editor.category,callback:function(e){t.$set(t.editor,"category",e)},expression:"editor.category"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md7:""}},[n("v-text-field",{attrs:{rules:t.requiredRule,label:t.$t("general.description")},model:{value:t.editor.description,callback:function(e){t.$set(t.editor,"description",e)},expression:"editor.description"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{type:"number",step:"0.01",label:t.$t("transactions.addOrDelete")},model:{value:t.editor.modifyAmount,callback:function(e){t.$set(t.editor,"modifyAmount",e)},expression:"editor.modifyAmount"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{type:"number",step:"0.01",label:t.$t("transactions.baseAmount")},model:{value:t.editor.enteredAmount,callback:function(e){t.$set(t.editor,"enteredAmount",e)},expression:"editor.enteredAmount"}})],1)],1)],1)],1),t._v(" "),n("span",{staticClass:"subheading"},[t._v("\n        "+t._s(t.$t("transactions.finalAmount"))+":\n      ")]),t._v(" "),n("span",{staticClass:"headline"},[t._v(" \n        "+t._s(t._f("currency")(t.amount,t.$currencies[t.budget.currency]))+"\n      ")])],1),t._v(" "),n("v-card-actions",{staticClass:"pt-0"},[n("v-spacer"),t._v(" "),t.$vuetify.breakpoint.smAndUp?n("v-btn",{attrs:{color:"red",flat:"flat"},nativeOn:{click:function(e){return t.cancel(e)}}},[t._v(t._s(t.$t("general.cancel")))]):t._e(),t._v(" "),t.$vuetify.breakpoint.smAndUp?n("v-btn",{attrs:{color:"primary darken-1",flat:"flat"},nativeOn:{click:function(e){return t.save(e)}}},[t._v(t._s(t.$t("general.save")))]):t._e()],1)],1)],1):t._e()},[],!1,null,null,null);l.options.__file="TransactionEditor.vue",e.default=l.exports}}]);
//# sourceMappingURL=0.0d5d5c817b2cb97a9f4d.js.map